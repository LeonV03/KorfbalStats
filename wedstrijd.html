
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Wedstrijdregistratie</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
        }
        .scoreboard {
            display: flex;
            justify-content: space-between;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .vak-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .vak {
            flex: 1;
            text-align: center;
            padding: 15px;
            border: 2px solid #ccc;
            margin: 0 10px;
            border-radius: 8px;
            background-color: white;
        }
        .vak.active {
            background-color: #d3d3d3;
            border-color: #888;
        }
        #spelersContainer {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }
        .speler-blok {
            flex: 1 1 200px;
            min-width: 180px;
            background-color: #f0f0f0;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
        }
        .actie-knoppen {
            margin-top: 10px;
        }
        .actie-knoppen button {
            margin: 5px;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }
        .goal {
            background-color: lightgreen;
        }
        .shot {
            background-color: lightcoral;
        }
        #wisselBtn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
        }
        #statistiekenLink {
            display: block;
            margin-top: 40px;
            text-align: center;
            font-size: 18px;
        }
    </style>
</head>
<body>

    <h1>Wedstrijdregistratie</h1>

    <div class="scoreboard">
        <span id="teamThuis">Team Thuis</span>
        <span id="score">0 - 0</span>
        <span id="teamUit">Team Uit</span>
    </div>

    <div class="vak-indicator">
        <div id="vakA" class="vak active">Vak A - Aanval</div>
        <div id="vakB" class="vak">Vak B - Verdediging</div>
    </div>

    <button id="wisselBtn" onclick="wisselVak()">Bal naar ander vak</button>

    <div id="spelersContainer">
        <!-- Spelers worden hier dynamisch geladen -->
    </div>

    <a id="statistiekenLink" href="statistieken.html">Bekijk Statistieken â†’</a>

    <script>
        let teamThuis = localStorage.getItem('teamThuis') || 'Team Thuis';
        let teamUit = localStorage.getItem('teamUit') || 'Team Uit';
        let spelers = JSON.parse(localStorage.getItem('spelers')) || [];
        let statistieken = JSON.parse(localStorage.getItem('statistieken')) || {};
        let scoreThuis = 0;
        let scoreUit = 0;
        let huidigVak = 'A';
        let functieA = 'aanval';
        let functieB = 'verdediging';
        let doelpuntenInVak = 0;

        function updateScoreboard() {
            document.getElementById('teamThuis').innerText = teamThuis;
            document.getElementById('teamUit').innerText = teamUit;
            document.getElementById('score').innerText = `${scoreThuis} - ${scoreUit}`;
        }

        function updateVakIndicator() {
            const vakA = document.getElementById('vakA');
            const vakB = document.getElementById('vakB');
            const functie = huidigVak === 'A' ? functieA : functieB;
            vakA.classList.remove('active');
            vakB.classList.remove('active');
            if (huidigVak === 'A') {
                vakA.classList.add('active');
                vakA.innerText = `Vak A - ${functie.charAt(0).toUpperCase() + functie.slice(1)}`;
                vakB.innerText = `Vak B - ${functieB.charAt(0).toUpperCase() + functieB.slice(1)}`;
            } else {
                vakB.classList.add('active');
                vakB.innerText = `Vak B - ${functie.charAt(0).toUpperCase() + functie.slice(1)}`;
                vakA.innerText = `Vak A - ${functieA.charAt(0).toUpperCase() + functieA.slice(1)}`;
            }
        }

        function laadSpelers() {
            const container = document.getElementById('spelersContainer');
            container.innerHTML = '';
            const vakSpelers = spelers.filter(s => s.vak === huidigVak);
            vakSpelers.forEach(speler => {
                const blok = document.createElement('div');
                blok.className = 'speler-blok';
                blok.innerHTML = `<strong>${speler.naam}</strong>
                    <div class="actie-knoppen">
                        <button class="goal" onclick="event.stopPropagation(); registreerActie('${speler.naam}', 'doelpunt')">Doelpunt</button>
                        <button class="shot" onclick="event.stopPropagation(); registreerActie('${speler.naam}', 'doelpoging')">Doelpoging</button>
                    </div>`;
                container.appendChild(blok);
            });
        }

        function registreerActie(speler, type) {
            if (!statistieken[speler]) {
                statistieken[speler] = {
                    doelpunten_voor: 0,
                    doelpogingen_voor: 0,
                    doelpunten_tegen: 0,
                    doelpogingen_tegen: 0
                };
            }

            const functie = huidigVak === 'A' ? functieA : functieB;
            const isAanval = functie === 'aanval';

            if (type === 'doelpunt') {
                if (isAanval) {
                    statistieken[speler].doelpunten_voor++;
                    statistieken[speler].doelpogingen_voor++;
                    if (functieA === 'aanval') scoreThuis++; else scoreUit++;
                } else {
                    statistieken[speler].doelpunten_tegen++;
                    statistieken[speler].doelpogingen_tegen++;
                    if (functieA === 'verdediging') scoreThuis++; else scoreUit++;
                }
                doelpuntenInVak++;
                wisselVakNaDoelpunt();
            } else if (type === 'doelpoging') {
                if (isAanval) {
                    statistieken[speler].doelpogingen_voor++;
                } else {
                    statistieken[speler].doelpogingen_tegen++;
                }
            }

            localStorage.setItem('statistieken', JSON.stringify(statistieken));
            updateScoreboard();
        }

        function wisselVakNaDoelpunt() {
            wisselVak();
            if (doelpuntenInVak >= 2) {
                doelpuntenInVak = 0;
                const temp = functieA;
                functieA = functieB;
                functieB = temp;
            }
            updateVakIndicator();
            laadSpelers();
        }

        function wisselVak() {
            huidigVak = huidigVak === 'A' ? 'B' : 'A';
            updateVakIndicator();
            laadSpelers();
        }

        window.onload = function() {
            updateScoreboard();
            updateVakIndicator();
            laadSpelers();
        };
    </script>

</body>
</html>
